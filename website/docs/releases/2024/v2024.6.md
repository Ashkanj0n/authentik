---
title: Release 2024.6
slug: /releases/2024.6
---
:::::note
2024.6 has not been released yet! We're publishing these release notes as a preview of what's to come, and for our awesome beta testers trying out release candidates.

To try out the release candidate, replace your Docker image tag with the latest release candidate number, such as 2024.6.0-rc1. You can find the latest one in [the latest releases on GitHub](https://github.com/goauthentik/authentik/releases). If you don't find any, it means we haven't released one yet.
:::::

## Breaking changes

### PostgreSQL minimum supported version upgrade

authentik now requires PostgreSQL version 14 or later. We recommend upgrading to the latest version if you are running an older version.

The provided Helm chart defaults to PostgreSQL 15. If you are using the Helm chart with the default values, no action is required.

The provided Compose file was updated with PostgreSQL 16. You can follow the procedure [here](../../troubleshooting/postgres/upgrade_docker.md) to upgrade.

## New features

-   Google Workspace Provider (preview) (enterprise)
-   Microsoft Entra Provider (preview) (enterprise)
-   Reworked proxy provider redirect
-   Optimize sync and property mapping execution
-   Read-replica DB support

## Upgrading

authentik now requires PostgreSQL version 14 or later. We recommend upgrading to the latest version if needed. Follow the instructions [here](../../troubleshooting/postgres/upgrade_docker.md) if you need to upgrade PostgreSQL with docker-compose.

### docker-compose

To upgrade, download the new docker-compose file and update the Docker stack with the new version, using these commands:

```shell
wget -O docker-compose.yml https://goauthentik.io/version/2024.6/docker-compose.yml
docker compose up -d
```

The `-O` flag retains the downloaded file's name, overwriting any existing local file with the same name.

### Kubernetes

Upgrade the Helm Chart to the new version, using the following commands:

```shell
helm repo update
helm upgrade authentik authentik/authentik -f values.yaml --version ^2024.6
```

## Minor changes/fixes

-   core: add include_users flag to single group retrieval (#9721)
-   core: fix auth_method and auth_method_args being overwritten by password stage (#9782)
-   core: fix condition in task clean_expiring_models (#9603)
-   core: fix logic for token expiration (#9426)
-   core: fix source flow_manager not always appending save stage (#9659)
-   core: fix source_flow_manager saving user-source connection too early (#9559)
-   core: fix task clean_expiring_models removing valid sessions with using database storage (#9598)
-   core: only prefetch related objects when required (#9476)
-   enterprise/audit: fix audit logging with m2m relations (#9571)
-   enterprise/providers/google: initial account sync to google workspace (#9384)
-   enterprise/providers/google_workspace: ensure no group is created when no property mappings are set (#9783)
-   enterprise/providers/microsoft_entra: initial account sync to microsoft entra (#9632)
-   events: ensure all models' **str** can be called without any further lookups (#9480)
-   flows: fix execute API endpoint (#9478)
-   lib/providers/sync: multiple minor fixes (#9667)
-   providers/proxy: rework redirect mechanism (#8594)
-   providers/rac: bump guacd to 1.5.5 (#9514)
-   providers/saml: fix ecdsa support (#9537)
-   providers/scim: fix SCIM ID incorrectly used as primary key (#9557)
-   providers/scim: fix time_limit not set correctly (#9546)
-   providers/scim: optimize PropertyMapping fetching and execution (#9689)
-   rbac: fix some rough edges and inconsistencies (#9771)
-   root: add primary-replica db router (#9479)
-   root: include task_id in events and logs (#9749)
-   sources/oauth: ensure all UI sources return a valid source (#9401)
-   sources/oauth: fix OAuth Client sending token request incorrectly (#9474)
-   sources/saml: fix FlowPlanner error due to pickle (#9708)
-   sources/scim: fix duplicate groups and invalid schema (#9466)
-   sources/scim: fix service account user path (#9463)
-   stages/identification: don't check source component (#9410)
-   tenants: fix scheduled tasks not running on default tenant (#9583)
-   web/admin: fix disabled button color with dark theme (#9465)
-   web/admin: fix document title for admin interface (#9362)
-   web/admin: fix entra provider mapping form (#9767)
-   web/admin: only show non-backchannel providers in application provider select (#9658)
-   web/admin: rework initial wizard pages and add grid layout (#9668)
-   web/admin: show user internal service account as disabled (#9464)
-   web/common: fix locale detection for user-set locale (#9436)
-   web/flows: fix error when enrolling multiple WebAuthn devices consecutively (#9545)
-   web/flows: fix error when using consecutive webauthn validator stages (#9629)
-   web/flows: fix missing fallback for flow logo (#9487)
-   web: Add missing integrity hashes to package-lock.json (#9527)
-   web: Add resolved and integrity fields back to package-lock.json (#9419)
-   web: clean up some repetitive types (#9241)
-   web: clean up the options rendering in PromptForm (#9564)
-   web: fix value handling inside controlled components (#9648)
-   web: markdown: display markdown even when frontmatter is missing (#9404)

## API Changes

#### What's New

---

##### `GET` /propertymappings/provider/google_workspace/

##### `POST` /propertymappings/provider/google_workspace/

##### `GET` /propertymappings/provider/google_workspace/{pm_uuid}/

##### `PUT` /propertymappings/provider/google_workspace/{pm_uuid}/

##### `DELETE` /propertymappings/provider/google_workspace/{pm_uuid}/

##### `PATCH` /propertymappings/provider/google_workspace/{pm_uuid}/

##### `GET` /propertymappings/provider/google_workspace/{pm_uuid}/used_by/

##### `GET` /propertymappings/provider/microsoft_entra/

##### `POST` /propertymappings/provider/microsoft_entra/

##### `GET` /propertymappings/provider/microsoft_entra/{pm_uuid}/

##### `PUT` /propertymappings/provider/microsoft_entra/{pm_uuid}/

##### `DELETE` /propertymappings/provider/microsoft_entra/{pm_uuid}/

##### `PATCH` /propertymappings/provider/microsoft_entra/{pm_uuid}/

##### `GET` /propertymappings/provider/microsoft_entra/{pm_uuid}/used_by/

##### `GET` /providers/google_workspace/

##### `POST` /providers/google_workspace/

##### `GET` /providers/google_workspace/{id}/

##### `PUT` /providers/google_workspace/{id}/

##### `DELETE` /providers/google_workspace/{id}/

##### `PATCH` /providers/google_workspace/{id}/

##### `GET` /providers/google_workspace/{id}/sync/status/

##### `GET` /providers/google_workspace/{id}/used_by/

##### `GET` /providers/google_workspace_groups/

##### `POST` /providers/google_workspace_groups/

##### `GET` /providers/google_workspace_groups/{id}/

##### `PUT` /providers/google_workspace_groups/{id}/

##### `DELETE` /providers/google_workspace_groups/{id}/

##### `PATCH` /providers/google_workspace_groups/{id}/

##### `GET` /providers/google_workspace_groups/{id}/used_by/

##### `GET` /providers/google_workspace_users/

##### `POST` /providers/google_workspace_users/

##### `GET` /providers/google_workspace_users/{id}/

##### `PUT` /providers/google_workspace_users/{id}/

##### `DELETE` /providers/google_workspace_users/{id}/

##### `PATCH` /providers/google_workspace_users/{id}/

##### `GET` /providers/google_workspace_users/{id}/used_by/

##### `GET` /providers/microsoft_entra/

##### `POST` /providers/microsoft_entra/

##### `GET` /providers/microsoft_entra/{id}/

##### `PUT` /providers/microsoft_entra/{id}/

##### `DELETE` /providers/microsoft_entra/{id}/

##### `PATCH` /providers/microsoft_entra/{id}/

##### `GET` /providers/microsoft_entra/{id}/sync/status/

##### `GET` /providers/microsoft_entra/{id}/used_by/

##### `GET` /providers/microsoft_entra_groups/

##### `POST` /providers/microsoft_entra_groups/

##### `GET` /providers/microsoft_entra_groups/{id}/

##### `PUT` /providers/microsoft_entra_groups/{id}/

##### `DELETE` /providers/microsoft_entra_groups/{id}/

##### `PATCH` /providers/microsoft_entra_groups/{id}/

##### `GET` /providers/microsoft_entra_groups/{id}/used_by/

##### `GET` /providers/microsoft_entra_users/

##### `POST` /providers/microsoft_entra_users/

##### `GET` /providers/microsoft_entra_users/{id}/

##### `PUT` /providers/microsoft_entra_users/{id}/

##### `DELETE` /providers/microsoft_entra_users/{id}/

##### `PATCH` /providers/microsoft_entra_users/{id}/

##### `GET` /providers/microsoft_entra_users/{id}/used_by/

##### `GET` /providers/scim/{id}/sync/status/

##### `GET` /sources/ldap/{slug}/sync/status/

#### What's Deleted

---

##### `GET` /providers/scim/{id}/sync_status/

##### `GET` /sources/ldap/{slug}/sync_status/

#### What's Changed

---

##### `GET` /events/events/actions/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    Changed items (object): > Types of an object that can be created

    -   Added property `icon_url` (string)

##### `GET` /outposts/service_connections/all/types/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    Changed items (object): > Types of an object that can be created

    -   Added property `icon_url` (string)

##### `GET` /policies/all/types/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    Changed items (object): > Types of an object that can be created

    -   Added property `icon_url` (string)

##### `GET` /policies/event_matcher/{policy_uuid}/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `app` (string)

        > Match events created by selected application. When left empty, all applications are matched.

        Added enum values:

        -   `authentik.enterprise.providers.google_workspace`
        -   `authentik.enterprise.providers.microsoft_entra`

    -   Changed property `model` (string)

        > Match events created by selected model. When left empty, all models are matched. When an app is selected, all the application's models are matched.

        Added enum values:

        -   `authentik_providers_google_workspace.googleworkspaceprovider`
        -   `authentik_providers_google_workspace.googleworkspaceprovidermapping`
        -   `authentik_providers_microsoft_entra.microsoftentraprovider`
        -   `authentik_providers_microsoft_entra.microsoftentraprovidermapping`

##### `PUT` /policies/event_matcher/{policy_uuid}/

###### Request:

Changed content type : `application/json`

-   Changed property `app` (string)

    > Match events created by selected application. When left empty, all applications are matched.

    Added enum values:

    -   `authentik.enterprise.providers.google_workspace`
    -   `authentik.enterprise.providers.microsoft_entra`

-   Changed property `model` (string)

    > Match events created by selected model. When left empty, all models are matched. When an app is selected, all the application's models are matched.

    Added enum values:

    -   `authentik_providers_google_workspace.googleworkspaceprovider`
    -   `authentik_providers_google_workspace.googleworkspaceprovidermapping`
    -   `authentik_providers_microsoft_entra.microsoftentraprovider`
    -   `authentik_providers_microsoft_entra.microsoftentraprovidermapping`

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `app` (string)

        > Match events created by selected application. When left empty, all applications are matched.

        Added enum values:

        -   `authentik.enterprise.providers.google_workspace`
        -   `authentik.enterprise.providers.microsoft_entra`

    -   Changed property `model` (string)

        > Match events created by selected model. When left empty, all models are matched. When an app is selected, all the application's models are matched.

        Added enum values:

        -   `authentik_providers_google_workspace.googleworkspaceprovider`
        -   `authentik_providers_google_workspace.googleworkspaceprovidermapping`
        -   `authentik_providers_microsoft_entra.microsoftentraprovider`
        -   `authentik_providers_microsoft_entra.microsoftentraprovidermapping`

##### `PATCH` /policies/event_matcher/{policy_uuid}/

###### Request:

Changed content type : `application/json`

-   Changed property `app` (string)

    > Match events created by selected application. When left empty, all applications are matched.

    Added enum values:

    -   `authentik.enterprise.providers.google_workspace`
    -   `authentik.enterprise.providers.microsoft_entra`

-   Changed property `model` (string)

    > Match events created by selected model. When left empty, all models are matched. When an app is selected, all the application's models are matched.

    Added enum values:

    -   `authentik_providers_google_workspace.googleworkspaceprovider`
    -   `authentik_providers_google_workspace.googleworkspaceprovidermapping`
    -   `authentik_providers_microsoft_entra.microsoftentraprovider`
    -   `authentik_providers_microsoft_entra.microsoftentraprovidermapping`

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `app` (string)

        > Match events created by selected application. When left empty, all applications are matched.

        Added enum values:

        -   `authentik.enterprise.providers.google_workspace`
        -   `authentik.enterprise.providers.microsoft_entra`

    -   Changed property `model` (string)

        > Match events created by selected model. When left empty, all models are matched. When an app is selected, all the application's models are matched.

        Added enum values:

        -   `authentik_providers_google_workspace.googleworkspaceprovider`
        -   `authentik_providers_google_workspace.googleworkspaceprovidermapping`
        -   `authentik_providers_microsoft_entra.microsoftentraprovider`
        -   `authentik_providers_microsoft_entra.microsoftentraprovidermapping`

##### `GET` /propertymappings/all/types/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    Changed items (object): > Types of an object that can be created

    -   Added property `icon_url` (string)

##### `GET` /providers/all/types/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    Changed items (object): > Types of an object that can be created

    -   Added property `icon_url` (string)

##### `GET` /sources/all/types/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    Changed items (object): > Types of an object that can be created

    -   Added property `icon_url` (string)

##### `GET` /stages/all/types/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    Changed items (object): > Types of an object that can be created

    -   Added property `icon_url` (string)

##### `GET` /stages/email/templates/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    Changed items (object): > Types of an object that can be created

    -   Added property `icon_url` (string)

##### `GET` /core/groups/{group_uuid}/

###### Parameters:

Added: `include_users` in `query`

##### `POST` /policies/event_matcher/

###### Request:

Changed content type : `application/json`

-   Changed property `app` (string)

    > Match events created by selected application. When left empty, all applications are matched.

    Added enum values:

    -   `authentik.enterprise.providers.google_workspace`
    -   `authentik.enterprise.providers.microsoft_entra`

-   Changed property `model` (string)

    > Match events created by selected model. When left empty, all models are matched. When an app is selected, all the application's models are matched.

    Added enum values:

    -   `authentik_providers_google_workspace.googleworkspaceprovider`
    -   `authentik_providers_google_workspace.googleworkspaceprovidermapping`
    -   `authentik_providers_microsoft_entra.microsoftentraprovider`
    -   `authentik_providers_microsoft_entra.microsoftentraprovidermapping`

###### Return Type:

Changed response : **201 Created**

-   Changed content type : `application/json`

    -   Changed property `app` (string)

        > Match events created by selected application. When left empty, all applications are matched.

        Added enum values:

        -   `authentik.enterprise.providers.google_workspace`
        -   `authentik.enterprise.providers.microsoft_entra`

    -   Changed property `model` (string)

        > Match events created by selected model. When left empty, all models are matched. When an app is selected, all the application's models are matched.

        Added enum values:

        -   `authentik_providers_google_workspace.googleworkspaceprovider`
        -   `authentik_providers_google_workspace.googleworkspaceprovidermapping`
        -   `authentik_providers_microsoft_entra.microsoftentraprovider`
        -   `authentik_providers_microsoft_entra.microsoftentraprovidermapping`

##### `GET` /policies/event_matcher/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `results` (array)

        Changed items (object): > Event Matcher Policy Serializer

        -   Changed property `app` (string)

            > Match events created by selected application. When left empty, all applications are matched.

            Added enum values:

            -   `authentik.enterprise.providers.google_workspace`
            -   `authentik.enterprise.providers.microsoft_entra`

        -   Changed property `model` (string)

            > Match events created by selected model. When left empty, all models are matched. When an app is selected, all the application's models are matched.

            Added enum values:

            -   `authentik_providers_google_workspace.googleworkspaceprovider`
            -   `authentik_providers_google_workspace.googleworkspaceprovidermapping`
            -   `authentik_providers_microsoft_entra.microsoftentraprovider`
            -   `authentik_providers_microsoft_entra.microsoftentraprovidermapping`

##### `GET` /providers/all/

###### Parameters:

Added: `backchannel` in `query`

> When not set all providers are returned. When set to true, only backchannel providers are returned. When set to false, backchannel providers are excluded

Deleted: `backchannel_only` in `query`

##### `POST` /rbac/permissions/assigned_by_roles/{uuid}/assign/

###### Request:

Changed content type : `application/json`

-   Changed property `model` (string)

    Added enum values:

    -   `authentik_providers_google_workspace.googleworkspaceprovider`
    -   `authentik_providers_google_workspace.googleworkspaceprovidermapping`
    -   `authentik_providers_microsoft_entra.microsoftentraprovider`
    -   `authentik_providers_microsoft_entra.microsoftentraprovidermapping`

##### `PATCH` /rbac/permissions/assigned_by_roles/{uuid}/unassign/

###### Request:

Changed content type : `application/json`

-   Changed property `model` (string)

    Added enum values:

    -   `authentik_providers_google_workspace.googleworkspaceprovider`
    -   `authentik_providers_google_workspace.googleworkspaceprovidermapping`
    -   `authentik_providers_microsoft_entra.microsoftentraprovider`
    -   `authentik_providers_microsoft_entra.microsoftentraprovidermapping`

##### `POST` /rbac/permissions/assigned_by_users/{id}/assign/

###### Request:

Changed content type : `application/json`

-   Changed property `model` (string)

    Added enum values:

    -   `authentik_providers_google_workspace.googleworkspaceprovider`
    -   `authentik_providers_google_workspace.googleworkspaceprovidermapping`
    -   `authentik_providers_microsoft_entra.microsoftentraprovider`
    -   `authentik_providers_microsoft_entra.microsoftentraprovidermapping`

##### `PATCH` /rbac/permissions/assigned_by_users/{id}/unassign/

###### Request:

Changed content type : `application/json`

-   Changed property `model` (string)

    Added enum values:

    -   `authentik_providers_google_workspace.googleworkspaceprovider`
    -   `authentik_providers_google_workspace.googleworkspaceprovidermapping`
    -   `authentik_providers_microsoft_entra.microsoftentraprovider`
    -   `authentik_providers_microsoft_entra.microsoftentraprovidermapping`

##### `GET` /sources/ldap/{slug}/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `PUT` /sources/ldap/{slug}/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `PATCH` /sources/ldap/{slug}/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `GET` /sources/oauth/{slug}/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `PUT` /sources/oauth/{slug}/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `PATCH` /sources/oauth/{slug}/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `GET` /sources/plex/{slug}/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `PUT` /sources/plex/{slug}/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `PATCH` /sources/plex/{slug}/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `GET` /sources/saml/{slug}/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `PUT` /sources/saml/{slug}/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `PATCH` /sources/saml/{slug}/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `GET` /events/system_tasks/{uuid}/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Added property `expires` (string)

    -   Added property `expiring` (boolean)

##### `GET` /rbac/permissions/assigned_by_roles/

###### Parameters:

Changed: `model` in `query`

##### `GET` /rbac/permissions/assigned_by_users/

###### Parameters:

Changed: `model` in `query`

##### `POST` /sources/ldap/

###### Return Type:

Changed response : **201 Created**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `GET` /sources/ldap/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `results` (array)

        Changed items (object): > LDAP Source Serializer

        -   Changed property `icon` (string)

##### `POST` /sources/oauth/

###### Return Type:

Changed response : **201 Created**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `GET` /sources/oauth/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `results` (array)

        Changed items (object): > OAuth Source Serializer

        -   Changed property `icon` (string)

##### `POST` /sources/plex/

###### Return Type:

Changed response : **201 Created**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `GET` /sources/plex/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `results` (array)

        Changed items (object): > Plex Source Serializer

        -   Changed property `icon` (string)

##### `POST` /sources/saml/

###### Return Type:

Changed response : **201 Created**

-   Changed content type : `application/json`

    -   Changed property `icon` (string)

##### `GET` /sources/saml/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `results` (array)

        Changed items (object): > SAMLSource Serializer

        -   Changed property `icon` (string)

##### `PUT` /core/transactional/applications/

###### Request:

Changed content type : `application/json`

-   Changed property `provider_model` (string)

    Added enum values:

    -   `authentik_providers_google_workspace.googleworkspaceprovider`
    -   `authentik_providers_microsoft_entra.microsoftentraprovider`

-   Changed property `provider` (object)

    Added 'authentik_providers_google_workspace.googleworkspaceprovider' provider_model:

    -   Property `name` (string)

    -   Property `property_mappings` (array)

        Items (string):

    -   Property `property_mappings_group` (array)

        > Property mappings used for group creation/updating.

        Items (string):

    -   Property `delegated_subject` (string)

    -   Property `credentials` (object)

    -   Property `scopes` (string)

    -   Property `exclude_users_service_account` (boolean)

    -   Property `filter_group` (string)

    -   Property `user_delete_action` (string)

        Enum values:

        -   `do_nothing`
        -   `delete`
        -   `suspend`

    -   Property `group_delete_action` (string)

    -   Property `default_group_email_domain` (string)

    Added 'authentik_providers_microsoft_entra.microsoftentraprovider' provider_model:

    -   Property `name` (string)

    -   Property `property_mappings` (array)

    -   Property `property_mappings_group` (array)

        > Property mappings used for group creation/updating.

    -   Property `client_id` (string)

    -   Property `client_secret` (string)

    -   Property `tenant_id` (string)

    -   Property `exclude_users_service_account` (boolean)

    -   Property `filter_group` (string)

    -   Property `user_delete_action` (string)

    -   Property `group_delete_action` (string)

##### `GET` /events/system_tasks/

###### Return Type:

Changed response : **200 OK**

-   Changed content type : `application/json`

    -   Changed property `results` (array)

        Changed items (object): > Serialize TaskInfo and TaskResult

        -   Added property `expires` (string)

        -   Added property `expiring` (boolean)
